<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spole캜n칠 Sledov치n칤 YouTube</title>
    <style>
        /* Z치kladn칤 rozlo쬰n칤 pomoc칤 Flexbox */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex; /* Pou쬴jeme flexbox pro hlavn칤 rozlo쬰n칤 */
            height: 100vh;
            background-color: #f0f2f5;
        }

        /* Lev칳 sloupec pro u쬴vatele */
        .sidebar {
            width: 300px;
            padding: 20px;
            background-color: #ffffff;
            border-right: 1px solid #ddd;
            display: flex;
            flex-direction: column;
        }

        .sidebar h2 {
            margin-top: 0;
            color: #333;
        }

        .invite-button {
            padding: 10px;
            background-color: #ff0000; /* YouTube barva */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 20px;
            transition: background-color 0.2s;
        }

        .invite-button:hover {
            background-color: #cc0000;
        }

        /* Seznam u쬴vatel콢 */
        .user-list {
            list-style: none;
            padding: 0;
            margin: 0;
            overflow-y: auto; /* Pro p콏칤pad, 쬰 by bylo moc lid칤 */
        }

        .user-list li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            font-weight: bold;
        }

        .user-list li:first-child {
            color: #007bff; /* Tvoje zv칳razn캩n칠 jm칠no */
        }

        .user-list li:last-child {
            border-bottom: none;
        }

        /* Hlavn칤 obsah (video a vyhled치v치n칤) */
        .main-content {
            flex-grow: 1; /* Zabere zb칳vaj칤c칤 prostor */
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Vyhled치vac칤 li코ta */
        .search-container {
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
            display: flex;
        }

        .search-container input[type="text"] {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px 0 0 5px;
            font-size: 16px;
        }

        .search-container button {
            padding: 10px 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .search-container button:hover {
            background-color: #218838;
        }

        /* Kontejner pro YouTube p콏ehr치va캜 (pro responzivitu) */
        .video-container {
            width: 100%;
            max-width: 800px;
            /* Triky pro udr쬰n칤 pom캩ru stran 16:9 */
            position: relative;
            padding-bottom: 56.25%; /* 16:9 = (9/16) * 100% = 56.25% */
            height: 0;
            overflow: hidden;
            background-color: black;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        #youtube-player {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none; /* Skryjeme r치me캜ek iframe */
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>칔캜astn칤ci</h2>

        <button class="invite-button" onclick="alert('Tady by se zobrazil odkaz pro pozv치n칤!');">
            游댕 Pozvat do m칤stnosti
        </button>

        <ul class="user-list" id="user-list">
            <li>游븸 **Kuba (Ty)**</li>
            <li>游뱄 Gemini</li>
            <li>游논 Kamar치d 1</li>
            <li>游논 Kamar치d 2</li>
        </ul>
    </div>

    <div class="main-content">

        <div class="search-container">
            <input type="text" id="video-url" placeholder="Vlo URL YouTube videa sem..." value="https://www.youtube.com/watch?v=dQw4w9WgXcQ">
            <button onclick="loadVideo()">P콏ehr치t</button>
        </div>

        <div class="video-container">
            <div id="youtube-player"></div>
        </div>

        <p style="margin-top: 20px; color: #666;">
            **D콡LE콯IT칄:** Tato str치nka je jen vizu치ln칤 kostra. Pro skute캜nou synchronizaci je nutn칠 p콏idat backend (server) a WebSockety.
        </p>
    </div>

    <script>
        // 1. Zaveden칤 YouTube API do str치nky
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player; // Prom캩nn치 pro ulo쬰n칤 p콏ehr치va캜e

        // 2. Funkce, kter치 se zavol치, jakmile je API p콏ipraven칠
        function onYouTubeIframeAPIReady() {
            // P콏i startu na캜teme v칳choz칤 video (zadan칠 v HTML inputu)
            loadVideo();
        }

        // 3. Funkce pro vytvo콏en칤 (nebo aktualizaci) p콏ehr치va캜e
        function loadVideo() {
            const urlInput = document.getElementById('video-url').value;
            // Extrakce ID videa z URL - zkus칤 vybrat k칩d za v= nebo youtu.be/
            const videoIdMatch = urlInput.match(/(?:youtu\.be\/|v=)([a-zA-Z0-9_-]{11})/);

            if (!videoIdMatch) {
                alert('Pros칤m, vlo platnou URL YouTube videa.');
                return;
            }

            const videoId = videoIdMatch[1];

            // Pokud p콏ehr치va캜 u existuje, jen ho zm캩n칤me
            if (player) {
                player.loadVideoById(videoId);
            } else {
                // Jinak vytvo콏칤me nov칳 p콏ehr치va캜
                player = new YT.Player('youtube-player', {
                    height: '100%',
                    width: '100%',
                    videoId: videoId,
                    playerVars: {
                        'controls': 1, // Zobraz칤 ovl치dac칤 prvky
                        'playsinline': 1 // P콏ehr치v치n칤 v okn캩
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });
            }
        }

        // 4. Funkce volan치 po na캜ten칤 p콏ehr치va캜e
        function onPlayerReady(event) {
            console.log('YouTube p콏ehr치va캜 je p콏ipraven.');
            // event.target.playVideo(); // M콢쬰코 hned spustit
        }

        // 5. Zde by se implementovala synchronizace (kl칤캜ov치 캜치st)
        function onPlayerStateChange(event) {
            // K칩dy stavu:
            // -1: Nep콏ehr치no
            // 0: Skon캜eno
            // 1: P콏ehr치v치n칤
            // 2: Pozastaveno
            // 3: Ukl치d치n칤 (Buffering)
            // 5: Cueled (P콏ipraveno ke spu코t캩n칤)

            const currentState = event.data;
            const currentTime = player.getCurrentTime();

            console.log(`Stav se zm캩nil na: ${currentState}, 캜as: ${currentTime.toFixed(2)}s`);

            // ***********************************************
            // *** TOTO JE M칈STO PRO WEBSOCKET IMPLEMENTACI ***
            // ***********************************************
            // Zde by tv콢j k칩d poslal zpr치vu s nov칳m stavem a 캜asem (currentState, currentTime)
            // na server (p콏es WebSocket), aby ji poslal d치l v코em ostatn칤m u쬴vatel콢m.

            /* P콏칤klad, jak by to vypadalo s fiktivn칤 funkc칤 pro odesl치n칤:
            if (currentState === 1) { // P콏ehr치v치n칤
                sendWebSocketMessage({ action: 'play', time: currentTime });
            } else if (currentState === 2) { // Pozastaveno
                sendWebSocketMessage({ action: 'pause', time: currentTime });
            }
            */
        }
    </script>
</body>
</html>
